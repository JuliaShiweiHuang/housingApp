(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1084],{4123:function(e,t,r){"use strict";r.r(t);var n=r(3412);var i=r(3474);var a=r(3475);var s=r(3415);var o=r(3432);var u=r(3427);var f=r(3417);var l=r(3421);var h=r(3422);var d=r(3426);var c=r(4124);var y=r(3437);var v=r(4127);var _=r(3418);var g=r(3625);var p=r(3506);var E=r(4128);var m=r(3601);var I=function(e){var t=e||{};g["default"].call(this,{attributions:t.attributions,logo:t.logo,projection:void 0,state:p["default"].READY,wrapX:void 0===t.wrapX||t.wrapX});this.loader_=n["default"].nullFunction;this.format_=t.format;this.overlaps_=void 0==t.overlaps||t.overlaps;this.url_=t.url;if(void 0!==t.loader)this.loader_=t.loader;else if(void 0!==this.url_){u["default"].assert(this.format_,7);this.loader_=c["default"].xhr(this.url_,this.format_)}this.strategy_=void 0!==t.strategy?t.strategy:v["default"].all;var r=void 0===t.useSpatialIndex||t.useSpatialIndex;this.featuresRtree_=r?new m["default"]:null;this.loadedExtentsRtree_=new m["default"];this.nullGeometryFeatures_={};this.idIndex_={};this.undefIdIndex_={};this.featureChangeKeys_={};this.featuresCollection_=null;var a,s;if(t.features instanceof i["default"]){a=t.features;s=a.getArray()}else Array.isArray(t.features)&&(s=t.features);r||void 0!==a||(a=new i["default"](s));void 0!==s&&this.addFeaturesInternal(s);void 0!==a&&this.bindFeaturesCollection_(a)};n["default"].inherits(I,g["default"]);I.prototype.addFeature=function(e){this.addFeatureInternal(e);this.changed()};I.prototype.addFeatureInternal=function(e){var t=n["default"].getUid(e).toString();if(!this.addToIndex_(t,e))return;this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new I.Event(E["default"].ADDFEATURE,e))};I.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[f["default"].listen(t,h["default"].CHANGE,this.handleFeatureChange_,this),f["default"].listen(t,s["default"].PROPERTYCHANGE,this.handleFeatureChange_,this)]};I.prototype.addToIndex_=function(e,t){var r=true;var n=t.getId();if(void 0!==n)n.toString()in this.idIndex_?r=false:this.idIndex_[n.toString()]=t;else{u["default"].assert(!(e in this.undefIdIndex_),30);this.undefIdIndex_[e]=t}return r};I.prototype.addFeatures=function(e){this.addFeaturesInternal(e);this.changed()};I.prototype.addFeaturesInternal=function(e){var t,r,i,a;var s=[];var o=[];var u=[];for(r=0,i=e.length;r<i;r++){a=e[r];t=n["default"].getUid(a).toString();this.addToIndex_(t,a)&&o.push(a)}for(r=0,i=o.length;r<i;r++){a=o[r];t=n["default"].getUid(a).toString();this.setupChangeEvents_(t,a);var f=a.getGeometry();if(f){var l=f.getExtent();s.push(l);u.push(a)}else this.nullGeometryFeatures_[t]=a}this.featuresRtree_&&this.featuresRtree_.load(s,u);for(r=0,i=o.length;r<i;r++)this.dispatchEvent(new I.Event(E["default"].ADDFEATURE,o[r]))};I.prototype.bindFeaturesCollection_=function(e){var t=false;f["default"].listen(this,E["default"].ADDFEATURE,function(r){if(!t){t=true;e.push(r.feature);t=false}});f["default"].listen(this,E["default"].REMOVEFEATURE,function(r){if(!t){t=true;e.remove(r.feature);t=false}});f["default"].listen(e,a["default"].ADD,function(e){if(!t){t=true;this.addFeature(e.element);t=false}},this);f["default"].listen(e,a["default"].REMOVE,function(e){if(!t){t=true;this.removeFeature(e.element);t=false}},this);this.featuresCollection_=e};I.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){var r=this.featureChangeKeys_[t];r.forEach(f["default"].unlistenByKey)}if(!this.featuresCollection_){this.featureChangeKeys_={};this.idIndex_={};this.undefIdIndex_={}}}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(var n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear();this.featuresRtree_&&this.featuresRtree_.clear();this.loadedExtentsRtree_.clear();this.nullGeometryFeatures_={};var i=new I.Event(E["default"].CLEAR);this.dispatchEvent(i);this.changed()};I.prototype.forEachFeature=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEach(e,t);if(this.featuresCollection_)return this.featuresCollection_.forEach(e,t)};I.prototype.forEachFeatureAtCoordinateDirect=function(e,t,r){var n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(n){var i=n.getGeometry();return i.intersectsCoordinate(e)?t.call(r,n):void 0})};I.prototype.forEachFeatureInExtent=function(e,t,r){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t,r);if(this.featuresCollection_)return this.featuresCollection_.forEach(t,r)};I.prototype.forEachFeatureIntersectingExtent=function(e,t,r){return this.forEachFeatureInExtent(e,function(n){var i=n.getGeometry();if(i.intersectsExtent(e)){var a=t.call(r,n);if(a)return a}})};I.prototype.getFeaturesCollection=function(){return this.featuresCollection_};I.prototype.getFeatures=function(){var e;if(this.featuresCollection_)e=this.featuresCollection_.getArray();else if(this.featuresRtree_){e=this.featuresRtree_.getAll();_["default"].isEmpty(this.nullGeometryFeatures_)||o["default"].extend(e,_["default"].getValues(this.nullGeometryFeatures_))}return e};I.prototype.getFeaturesAtCoordinate=function(e){var t=[];this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)});return t};I.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_.getInExtent(e)};I.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0];var n=e[1];var i=null;var a=[NaN,NaN];var s=Infinity;var o=[-Infinity,-Infinity,Infinity,Infinity];var u=t||y["default"].TRUE;this.featuresRtree_.forEachInExtent(o,function(e){if(u(e)){var t=e.getGeometry();var f=s;s=t.closestPointXY(r,n,a,s);if(s<f){i=e;var l=Math.sqrt(s);o[0]=r-l;o[1]=n-l;o[2]=r+l;o[3]=n+l}}});return i};I.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)};I.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null};I.prototype.getFormat=function(){return this.format_};I.prototype.getOverlaps=function(){return this.overlaps_};I.prototype.getResolutions=function(){};I.prototype.getUrl=function(){return this.url_};I.prototype.handleFeatureChange_=function(e){var t=e.target;var r=n["default"].getUid(t).toString();var i=t.getGeometry();if(i){var a=i.getExtent();if(r in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[r];this.featuresRtree_&&this.featuresRtree_.insert(a,t)}else this.featuresRtree_&&this.featuresRtree_.update(a,t)}else if(!(r in this.nullGeometryFeatures_)){this.featuresRtree_&&this.featuresRtree_.remove(t);this.nullGeometryFeatures_[r]=t}var s=t.getId();if(void 0!==s){var o=s.toString();if(r in this.undefIdIndex_){delete this.undefIdIndex_[r];this.idIndex_[o]=t}else if(this.idIndex_[o]!==t){this.removeFromIdIndex_(t);this.idIndex_[o]=t}}else if(!(r in this.undefIdIndex_)){this.removeFromIdIndex_(t);this.undefIdIndex_[r]=t}this.changed();this.dispatchEvent(new I.Event(E["default"].CHANGEFEATURE,t))};I.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&_["default"].isEmpty(this.nullGeometryFeatures_)};I.prototype.loadFeatures=function(e,t,r){var n=this.loadedExtentsRtree_;var i=this.strategy_(e,t);var a,s;for(a=0,s=i.length;a<s;++a){var o=i[a];var u=n.forEachInExtent(o,function(e){return d["default"].containsExtent(e.extent,o)});if(!u){this.loader_.call(this,o,t,r);n.insert(o,{extent:o.slice()})}}};I.prototype.removeLoadedExtent=function(e){var t=this.loadedExtentsRtree_;var r;t.forEachInExtent(e,function(t){if(d["default"].equals(t.extent,e)){r=t;return true}});r&&t.remove(r)};I.prototype.removeFeature=function(e){var t=n["default"].getUid(e).toString();t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);this.removeFeatureInternal(e);this.changed()};I.prototype.removeFeatureInternal=function(e){var t=n["default"].getUid(e).toString();this.featureChangeKeys_[t].forEach(f["default"].unlistenByKey);delete this.featureChangeKeys_[t];var r=e.getId();void 0!==r?delete this.idIndex_[r.toString()]:delete this.undefIdIndex_[t];this.dispatchEvent(new I.Event(E["default"].REMOVEFEATURE,e))};I.prototype.removeFromIdIndex_=function(e){var t=false;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r];t=true;break}return t};I.prototype.setLoader=function(e){this.loader_=e};I.Event=function(e,t){l["default"].call(this,e);this.feature=t};n["default"].inherits(I.Event,l["default"]);t["default"]=I},4127:function(e,t,r){"use strict";r.r(t);var n={};n.all=function(e,t){return[[-Infinity,-Infinity,Infinity,Infinity]]};n.bbox=function(e,t){return[e]};n.tile=function(e){return function(t,r){var n=e.getZForResolution(r);var i=e.getTileRangeForExtentAndZ(t,n);var a=[];var s=[n,0,0];for(s[1]=i.minX;s[1]<=i.maxX;++s[1])for(s[2]=i.minY;s[2]<=i.maxY;++s[2])a.push(e.getTileCoordExtent(s));return a}};t["default"]=n},4128:function(e,t,r){"use strict";r.r(t);var n={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};t["default"]=n},4135:function(e,t,r){"use strict";r.r(t);var n=r(3427);var i=r(3417);var a=r(3422);var s=r(3412);var o=r(3414);var u=r(3438);var f=r(4130);var l=function(e){o["default"].call(this);this.id_=void 0;this.geometryName_="geometry";this.style_=null;this.styleFunction_=void 0;this.geometryChangeKey_=null;i["default"].listen(this,o["default"].getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this);if(void 0!==e)if(e instanceof u["default"]||!e){var t=e;this.setGeometry(t)}else{var r=e;this.setProperties(r)}};s["default"].inherits(l,o["default"]);l.prototype.clone=function(){var e=new l(this.getProperties());e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var r=this.getStyle();r&&e.setStyle(r);return e};l.prototype.getGeometry=function(){return this.get(this.geometryName_)};l.prototype.getId=function(){return this.id_};l.prototype.getGeometryName=function(){return this.geometryName_};l.prototype.getStyle=function(){return this.style_};l.prototype.getStyleFunction=function(){return this.styleFunction_};l.prototype.handleGeometryChange_=function(){this.changed()};l.prototype.handleGeometryChanged_=function(){if(this.geometryChangeKey_){i["default"].unlistenByKey(this.geometryChangeKey_);this.geometryChangeKey_=null}var e=this.getGeometry();e&&(this.geometryChangeKey_=i["default"].listen(e,a["default"].CHANGE,this.handleGeometryChange_,this));this.changed()};l.prototype.setGeometry=function(e){this.set(this.geometryName_,e)};l.prototype.setStyle=function(e){this.style_=e;this.styleFunction_=e?l.createStyleFunction(e):void 0;this.changed()};l.prototype.setId=function(e){this.id_=e;this.changed()};l.prototype.setGeometryName=function(e){i["default"].unlisten(this,o["default"].getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this);this.geometryName_=e;i["default"].listen(this,o["default"].getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this);this.handleGeometryChanged_()};l.createStyleFunction=function(e){var t;if("function"===typeof e)t=2==e.length?function(t){return e(this,t)}:e;else{var r;if(Array.isArray(e))r=e;else{n["default"].assert(e instanceof f["default"],41);r=[e]}t=function(){return r}}return t};t["default"]=l}}]);